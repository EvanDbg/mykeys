# MyKeys 查询和编辑功能修复需求文档

## 背景

MyKeys 是一个企业微信密码管理机器人，当前存在两个功能缺陷需要修复。

## 问题描述

### 问题 1：查询序号返回错误数据

**现象**：用户搜索后返回多条结果，回复序号查看详情时，返回了错误的记录。

**示例**：
- 搜索 "地址" 返回 4 条结果（显示为 1, 2, 3, 4）
- 用户回复 "3" 查看第 3 条
- 系统返回的数据与列表第 3 项不符，删除提示显示 `/del 6` 而非预期的 ID

**根因**：系统将用户输入的序号直接作为数据库 ID 查询，而非列表中的位置索引。

### 问题 2：无法修改已存储数据

**现象**：用户只能新增或删除密码条目，无法修改已存储的信息。

**影响**：如需修改密码，只能先删除再重新添加，操作繁琐。

## 需求说明

### 需求 1：修复序号查询逻辑

1. 当搜索或列表返回多条结果时，在用户会话中保存结果列表
2. 当用户回复纯数字时，检查是否有待选列表
3. 如有待选列表，使用数字作为索引获取对应记录

### 需求 2：添加编辑功能

1. 新增 `/edit ID` 命令启动编辑流程
2. 编辑流程：
   - 显示当前记录信息和可编辑字段列表
   - 用户选择要修改的字段（编号）
   - 用户输入新值
   - 保存并确认
3. 可编辑字段：名称、网站、账号、密码、备注、到期时间
4. 更新帮助文本说明新命令

## 验收标准

- [ ] 搜索多条结果后，回复序号能正确返回对应记录
- [ ] `/list` 后回复序号能正确返回对应记录  
- [ ] `/edit ID` 能启动编辑流程
- [ ] 能够成功修改各个字段
- [ ] `/help` 显示编辑命令说明
